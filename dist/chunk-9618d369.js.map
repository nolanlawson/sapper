{"version":3,"file":"chunk-9618d369.js","sources":["../node_modules/port-authority/dist/port-authority.esm.js","../src/api/utils/Deferred.ts"],"sourcesContent":["import { connect, createConnection, createServer } from 'net';\n\nvar promise;\nfunction weird() {\n    if (!promise) {\n        promise = get_weird(9000);\n    }\n    return promise;\n}\nfunction get_weird(port) {\n    return new Promise(function (fulfil) {\n        var server = createServer();\n        server.unref();\n        server.on('error', function () {\n            fulfil(get_weird(port + 1));\n        });\n        server.listen({ port: port }, function () {\n            var server2 = createServer();\n            server2.unref();\n            server2.on('error', function () {\n                server.close(function () {\n                    fulfil(false);\n                });\n            });\n            server2.listen({ port: port }, function () {\n                server2.close(function () {\n                    server.close(function () {\n                        fulfil(true);\n                    });\n                });\n            });\n        });\n    });\n}\n\nfunction check(port) {\n    return weird().then(function (weird$$1) {\n        if (weird$$1) {\n            return check_weird(port);\n        }\n        return new Promise(function (fulfil) {\n            var server = createServer();\n            server.unref();\n            server.on('error', function () {\n                fulfil(false);\n            });\n            server.listen({ port: port }, function () {\n                server.close(function () {\n                    fulfil(true);\n                });\n            });\n        });\n    });\n}\nfunction check_weird(port) {\n    return new Promise(function (fulfil) {\n        var client = createConnection({ port: port }, function () {\n            client.end();\n            fulfil(false);\n        })\n            .on('error', function () {\n            fulfil(true);\n        });\n    });\n}\n\nfunction find(port) {\n    return weird().then(function (weird$$1) {\n        if (weird$$1) {\n            return new Promise(function (fulfil) {\n                get_port_weird(port, fulfil);\n            });\n        }\n        return new Promise(function (fulfil) {\n            get_port(port, fulfil);\n        });\n    });\n}\nfunction get_port(port, cb) {\n    var server = createServer();\n    server.unref();\n    server.on('error', function () {\n        get_port(port + 1, cb);\n    });\n    server.listen({ port: port }, function () {\n        server.close(function () {\n            cb(port);\n        });\n    });\n}\nfunction get_port_weird(port, cb) {\n    var client = createConnection({ port: port }, function () {\n        client.end();\n        get_port(port + 1, cb);\n    })\n        .on('error', function () {\n        cb(port);\n    });\n}\n\nfunction wait(port, _a) {\n    var _b = (_a === void 0 ? {} : _a).timeout, timeout = _b === void 0 ? 5000 : _b;\n    return new Promise(function (fulfil, reject) {\n        var t = setTimeout(function () {\n            reject(new Error(\"timed out waiting for connection\"));\n        }, timeout);\n        get_connection(port, function () {\n            clearTimeout(t);\n            fulfil();\n        });\n    });\n}\nfunction get_connection(port, cb) {\n    var timeout;\n    var socket = connect(port, 'localhost', function () {\n        cb();\n        socket.destroy();\n        clearTimeout(timeout);\n    });\n    socket.on('error', function () {\n        clearTimeout(timeout);\n        setTimeout(function () {\n            get_connection(port, cb);\n        }, 10);\n    });\n    timeout = setTimeout(function () {\n        socket.destroy();\n    }, 5000);\n}\n\nexport { check, find, wait };\n","export default class Deferred {\n\tpromise: Promise<any>;\n\tfulfil: (value?: any) => void;\n\treject: (error: Error) => void;\n\n\tconstructor() {\n\t\tthis.promise = new Promise((fulfil, reject) => {\n\t\t\tthis.fulfil = fulfil;\n\t\t\tthis.reject = reject;\n\t\t});\n\t}\n}"],"names":["createServer","createConnection","connect"],"mappings":"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"}
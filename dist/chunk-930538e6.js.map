{"version":3,"file":"chunk-930538e6.js","sources":["../src/api/utils/validate_bundler.ts","../src/api/utils/copy_shimport.ts","../src/core/read_template.ts"],"sourcesContent":["import * as fs from 'fs';\n\nexport default function validate_bundler(bundler?: 'rollup' | 'webpack') {\n\tif (!bundler) {\n\t\tbundler = (\n\t\t\tfs.existsSync('rollup.config.js') ? 'rollup' :\n\t\t\tfs.existsSync('webpack.config.js') ? 'webpack' :\n\t\t\tnull\n\t\t);\n\n\t\tif (!bundler) {\n\t\t\t// TODO remove in a future version\n\t\t\tdeprecate_dir('rollup');\n\t\t\tdeprecate_dir('webpack');\n\n\t\t\tthrow new Error(`Could not find rollup.config.js or webpack.config.js`);\n\t\t}\n\t}\n\n\tif (bundler !== 'rollup' && bundler !== 'webpack') {\n\t\tthrow new Error(`'${bundler}' is not a valid option for --bundler â€” must be either 'rollup' or 'webpack'`);\n\t}\n\n\treturn bundler;\n}\n\nfunction deprecate_dir(bundler: 'rollup' | 'webpack') {\n\ttry {\n\t\tconst stats = fs.statSync(bundler);\n\t\tif (!stats.isDirectory()) return;\n\t} catch (err) {\n\t\t// do nothing\n\t\treturn;\n\t}\n\n\t// TODO link to docs, once those docs exist\n\tthrow new Error(`As of Sapper 0.21, build configuration should be placed in a single ${bundler}.config.js file`);\n}","import * as fs from 'fs';\n\nexport function copy_shimport(dest: string) {\n\tconst shimport_version = require('shimport/package.json').version;\n\tfs.writeFileSync(\n\t\t`${dest}/client/shimport@${shimport_version}.js`,\n\t\tfs.readFileSync(require.resolve('shimport/index.js'))\n\t);\n}","import * as fs from 'fs';\n\nexport default function read_template(dir: string) {\n\ttry {\n\t\treturn fs.readFileSync(`${dir}/template.html`, 'utf-8');\n\t} catch (err) {\n\t\tif (fs.existsSync(`app/template.html`)) {\n\t\t\tthrow new Error(`As of Sapper 0.21, the default folder structure has been changed:\n  app/    --> src/\n  routes/ --> src/routes/\n  assets/ --> static/`);\n\t\t}\n\n\t\tthrow err;\n\t}\n}"],"names":["fs.existsSync","fs.statSync","fs.writeFileSync","fs.readFileSync"],"mappings":";;;;;;;SAEwB,gBAAgB,CAAC,OAA8B;IACtE,IAAI,CAAC,OAAO,EAAE;QACb,OAAO,IACNA,aAAa,CAAC,kBAAkB,CAAC,GAAG,QAAQ;YAC5CA,aAAa,CAAC,mBAAmB,CAAC,GAAG,SAAS;gBAC9C,IAAI,CACJ,CAAC;QAEF,IAAI,CAAC,OAAO,EAAE;;YAEb,aAAa,CAAC,QAAQ,CAAC,CAAC;YACxB,aAAa,CAAC,SAAS,CAAC,CAAC;YAEzB,MAAM,IAAI,KAAK,CAAC,sDAAsD,CAAC,CAAC;SACxE;KACD;IAED,IAAI,OAAO,KAAK,QAAQ,IAAI,OAAO,KAAK,SAAS,EAAE;QAClD,MAAM,IAAI,KAAK,CAAC,MAAI,OAAO,sFAA8E,CAAC,CAAC;KAC3G;IAED,OAAO,OAAO,CAAC;CACf;AAED,SAAS,aAAa,CAAC,OAA6B;IACnD,IAAI;QACH,IAAM,KAAK,GAAGC,WAAW,CAAC,OAAO,CAAC,CAAC;QACnC,IAAI,CAAC,KAAK,CAAC,WAAW,EAAE;YAAE,OAAO;KACjC;IAAC,OAAO,GAAG,EAAE;;QAEb,OAAO;KACP;;IAGD,MAAM,IAAI,KAAK,CAAC,yEAAuE,OAAO,oBAAiB,CAAC,CAAC;CACjH;;SCnCe,aAAa,CAAC,IAAY;IACzC,IAAM,gBAAgB,GAAG,OAAO,CAAC,uBAAuB,CAAC,CAAC,OAAO,CAAC;IAClEC,gBAAgB,CACZ,IAAI,yBAAoB,gBAAgB,QAAK,EAChDC,eAAe,CAAC,OAAO,CAAC,OAAO,CAAC,mBAAmB,CAAC,CAAC,CACrD,CAAC;CACF;;SCNuB,aAAa,CAAC,GAAW;IAChD,IAAI;QACH,OAAOA,eAAe,CAAI,GAAG,mBAAgB,EAAE,OAAO,CAAC,CAAC;KACxD;IAAC,OAAO,GAAG,EAAE;QACb,IAAIH,aAAa,CAAC,mBAAmB,CAAC,EAAE;YACvC,MAAM,IAAI,KAAK,CAAC,yIAGG,CAAC,CAAC;SACrB;QAED,MAAM,GAAG,CAAC;KACV;CACD;;;;;;"}